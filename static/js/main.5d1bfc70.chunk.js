(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{203:function(e,t,n){},254:function(e,t){},255:function(e,t){},259:function(e,t){},261:function(e,t){},300:function(e,t){},305:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=305},307:function(e,t){},309:function(e,t){},319:function(e,t){},321:function(e,t){},349:function(e,t){},351:function(e,t){},352:function(e,t){},357:function(e,t){},359:function(e,t){},378:function(e,t){},390:function(e,t){},393:function(e,t){},413:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),r=n.n(c),s=n(44),o=n.n(s),i=(n(203),n(43)),l=n(9),u=Object(c.createContext)(),j=function(e){var t=e.title,n=e.icon,r=Object(c.useContext)(u),s=r.isAuthenticated,o=r.logout,l=r.user,j=Object(a.jsxs)(c.Fragment,{children:[Object(a.jsxs)("li",{children:["Hello ",l&&l.name]}),Object(a.jsx)("li",{children:Object(a.jsxs)("a",{onClick:function(){o()},href:"#!",children:[Object(a.jsx)("i",{className:"fas fa-sign-out-alt"})," ",Object(a.jsx)("span",{className:"hide-sm",children:"Logout"})]})})]}),d=Object(a.jsxs)(c.Fragment,{children:[Object(a.jsx)("li",{children:Object(a.jsx)(i.b,{to:"/register",children:"Register"})}),Object(a.jsx)("li",{children:Object(a.jsx)(i.b,{to:"/login",children:"Login"})})]});return Object(a.jsxs)("div",{className:"navbar bg-primary",children:[Object(a.jsxs)("h1",{children:[Object(a.jsx)("i",{className:n})," ",t]}),Object(a.jsx)("ul",{children:s?j:d})]})};j.defaultProps={title:"Contact Keeper",icon:"fas fa-id-card-alt"};var d=Object(c.createContext)(),b=function(e){var t=e.contact,n=Object(c.useContext)(d),r=n.deleteContact,s=n.setCurrent,o=n.clearCurrent,i=t.id,l=t.name,u=t.email,j=t.phone,b=t.type;return Object(a.jsxs)("div",{className:"card bg-light",children:[Object(a.jsxs)("h3",{className:"text-primary text-left",children:[l," ",Object(a.jsx)("span",{style:{float:"right"},className:"badge "+("professional"===b?"badge-success":"badge-primary"),children:b.charAt(0).toUpperCase()+b.slice(1)})]}),Object(a.jsxs)("ul",{className:"list",children:[u&&Object(a.jsx)("li",{children:Object(a.jsxs)("i",{className:"fas fa-envelope-open",children:[" ",u]})}),j&&Object(a.jsx)("li",{children:Object(a.jsxs)("i",{className:"fas fa-phone",children:[" ",j]})})]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("button",{className:"btn btn-primary btn-sm",onClick:function(){return s(t)},children:"Edit"}),Object(a.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){r(i),o()},children:"Delete"})]})]})},p=n(417),O=n(415),h=function(){c.Fragment},f=function(){var e=Object(c.useContext)(d),t=e.contacts,n=e.filtered,r=e.getContacts,s=e.loading;return Object(c.useEffect)((function(){r()}),[]),null===t||0!==t.length||s?Object(a.jsx)(c.Fragment,{children:null===t||s?Object(a.jsx)(h,{}):Object(a.jsx)(p.a,{children:null!==n?n.map((function(e){return Object(a.jsx)(O.a,{timeout:500,classNames:"item",children:Object(a.jsx)(b,{contact:e})},e._id)})):t.map((function(e){return Object(a.jsx)(O.a,{timeout:500,classNames:"item",children:Object(a.jsx)(b,{contact:e})},e._id)}))})}):Object(a.jsx)("h4",{children:"Please add a contact!"})},m=n(32),x=n(3),g=n(16),y=function(){var e=Object(c.useContext)(d),t=e.addContact,n=e.current,r=e.clearCurrent,s=e.updateContact;Object(c.useEffect)((function(){u(null!==n?n:{name:"",email:"",phone:"",type:"personal"})}),[e,n]);var o=Object(c.useState)({name:"",email:"",phone:"",type:"personal"}),i=Object(g.a)(o,2),l=i[0],u=i[1],j=l.name,b=l.email,p=l.phone,O=l.type,h=function(e){return u(Object(x.a)(Object(x.a)({},l),{},Object(m.a)({},e.target.name,e.target.value)))},f=function(){r()};return Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),null===n?t(l):s(l),f()},children:[Object(a.jsx)("h2",{className:"text-primary",children:n?"Edit Contact":"Add Contact"}),Object(a.jsx)("input",{type:"text",placeholder:"Name",name:"name",value:j,onChange:h}),Object(a.jsx)("input",{type:"email",placeholder:"Email",name:"email",value:b,onChange:h}),Object(a.jsx)("input",{type:"text",placeholder:"Phone",name:"phone",value:p,onChange:h}),Object(a.jsx)("h5",{children:"Contact Type"}),Object(a.jsx)("input",{type:"radio",name:"type",value:"personal",checked:"personal"===O,onChange:h})," Personal"," ",Object(a.jsx)("input",{type:"radio",name:"type",value:"professional",checked:"professional"===O,onChange:h})," Professional",Object(a.jsx)("div",{children:Object(a.jsx)("input",{type:"submit",value:n?"Update Contact":"Add Contact",className:"btn btn-success btn-block"})}),n&&Object(a.jsx)("div",{children:Object(a.jsx)("button",{className:"btn btn-danger btn-block",onClick:f,children:"Clear"})})]})},v=function(){var e=Object(c.useContext)(d),t=Object(c.useRef)(""),n=e.filterContacts,r=e.clearFilter,s=e.filtered;Object(c.useEffect)((function(){null===s&&(t.current.value="")}));return Object(a.jsx)("form",{children:Object(a.jsx)("input",{ref:t,type:"text",placeholder:"Filter Contacts...",onChange:function(e){""!==t.current.value?n(e.target.value):r()}})})},C=function(){var e=Object(c.useContext)(u);return Object(c.useEffect)((function(){e.loadUser()}),[]),Object(a.jsxs)("div",{className:"grid-2",children:[Object(a.jsx)("div",{children:Object(a.jsx)(y,{})}),Object(a.jsxs)("div",{children:[Object(a.jsx)(v,{}),Object(a.jsx)(f,{})]})]})},N=function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"About this app"}),Object(a.jsx)("p",{className:"my-1",children:"This is a Full Stack App for keeping contacts "}),Object(a.jsxs)("p",{className:"bg-dark p",children:[Object(a.jsx)("strong",{children:"Version: "})," 1.0.0"]})]})},E=n(17),k=n.n(E),w=n(35),A=n(74),R="GET_CONTACTS",T="ADD_CONTACT",S="DELETE_CONTACT",_="SET_CURRENT",L="CLEAR_CURRENT",F="UPDATE_CONTACT",P="FILTER_CONTACTS",U="CLEAR_FILTER",I="SET_ALERT",D="REMOVE_ALERT",q="REGISTER_SUCCESS",G="REGISTER_FAIL",M="USER_LOADED",H="AUTH_ERROR",J="LOGIN_SUCCESS",V="LOGIN_FAIL",B="LOGOUT",K="CLEAR_ERRORS",z="CONTACT_ERROR",Q=function(e,t){switch(t.type){case R:return Object(x.a)(Object(x.a)({},e),{},{contacts:t.payload,loading:!1});case T:return Object(x.a)(Object(x.a)({},e),{},{contacts:[].concat(Object(A.a)(e.contacts),[t.payload]),loading:!1});case S:return Object(x.a)(Object(x.a)({},e),{},{contacts:e.contacts.filter((function(e){return e.id!==t.payload})),loading:!1});case _:return Object(x.a)(Object(x.a)({},e),{},{current:t.payload});case L:return Object(x.a)(Object(x.a)({},e),{},{current:null});case F:return Object(x.a)(Object(x.a)({},e),{},{contacts:e.contacts.map((function(e){return e.id===t.payload.id?t.payload:e})),loading:!1});case P:return Object(x.a)(Object(x.a)({},e),{},{filtered:e.contacts.filter((function(e){var n=new RegExp("".concat(t.payload),"gi");return e.name.match(n)||e.email.match(n)}))});case U:return Object(x.a)(Object(x.a)({},e),{},{filtered:null});case z:return Object(x.a)(Object(x.a)({},e),{},{error:t.payload});default:return e}},W=n(21),X=n.n(W),Y=(n(225),function(e){var t=Object(c.useReducer)(Q,{contacts:null,current:null,filtered:null,error:null}),n=Object(g.a)(t,2),r=n[0],s=n[1],o=function(){var e=Object(w.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.a.post("/api/contacts");case 3:t=e.sent,s({type:R,payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s({type:z,payload:e.t0.response.msg});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(w.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,X.a.post("/api/contacts",t,n);case 4:a=e.sent,s({type:T,payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:z,payload:e.t0.response.msg});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(d.Provider,{value:{contacts:r.contacts,addContact:i,deleteContact:function(e){s({type:S,payload:e})},current:r.current,setCurrent:function(e){s({type:_,payload:e})},clearCurrent:function(){s({type:L})},updateContact:function(e){s({type:F,payload:e})},filtered:r.filtered,filterContacts:function(e){s({type:P,payload:e})},clearFilter:function(){s({type:U})},getContacts:o,error:r.error},children:e.children})}),Z=function(e,t){switch(t.type){case q:return localStorage.setItem("token",t.payload.token),Object(x.a)(Object(x.a)(Object(x.a)({},e),t.payload),{},{isAuthenticated:!0,loading:!1});case G:case H:case V:case B:return localStorage.removeItem("token"),Object(x.a)(Object(x.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1,user:null,error:t.payload});case K:return Object(x.a)(Object(x.a)({},e),{},{error:null});case M:return Object(x.a)(Object(x.a)({},e),{},{isAuthenticated:!0,loading:!1,user:t.payload});case J:return localStorage.setItem("token",t.payload.token),Object(x.a)(Object(x.a)(Object(x.a)({},e),t.payload),{},{isAuthenticated:!0,loading:!1});default:return e}},$=function(e){e?X.a.defaults.headers.common["x-auth-token"]=e:delete X.a.defaults.headers.common["x-auth-token"]},ee=function(e){var t={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null,error:null},n=Object(c.useReducer)(Z,t),r=Object(g.a)(n,2),s=r[0],o=r[1],i=function(){var e=Object(w.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&$(localStorage.token),e.prev=1,e.next=4,X.a.get("/api/auth");case 4:t=e.sent,o({type:M,payload:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),o({type:H});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(w.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,X.a.post("/api/users",t,n);case 4:a=e.sent,o({type:q,payload:a.data}),i(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),o({type:G,payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(w.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,X.a.post("/api/auth",t,n);case 4:a=e.sent,o({type:J,payload:a.data}),i(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),o({type:V,payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(u.Provider,{value:{token:s.token,isAuthenticated:s.isAuthenticated,loading:s.loading,user:s.user,error:s.error,register:l,loadUser:i,login:j,logout:function(){o({type:B})},clearErrors:function(){return o({type:K})}},children:e.children})},te=n(416),ne=Object(c.createContext)(),ae=function(e,t){switch(t.type){case I:return[].concat(Object(A.a)(e),[t.payload]);case D:return e.filter((function(e){return e.id!==t.payload}));default:return e}},ce=function(e){var t=Object(c.useReducer)(ae,[]),n=Object(g.a)(t,2),r=n[0],s=n[1];return Object(a.jsx)(ne.Provider,{value:{alerts:r,setAlert:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,a=Object(te.a)();s({type:I,payload:{msg:e,type:t,id:a}}),setTimeout((function(){return s({type:D,payload:a})}),n)}},children:e.children})},re=function(e){var t=Object(c.useContext)(u),n=Object(c.useContext)(ne).setAlert,r=t.register,s=t.error,o=t.clearErrors,i=t.isAuthenticated;Object(c.useEffect)((function(){i&&e.history.push("/"),"User already exists"===s&&(n(s,"danger"),o())}),[s,i,e.history]);var l=Object(c.useState)({name:"",email:"",password:"",password2:""}),j=Object(g.a)(l,2),d=j[0],b=j[1],p=d.name,O=d.email,h=d.password,f=d.password2,y=function(e){return b(Object(x.a)(Object(x.a)({},d),{},Object(m.a)({},e.target.name,e.target.value)))};return Object(a.jsxs)("div",{className:"form-container",children:[Object(a.jsxs)("h1",{children:["Account ",Object(a.jsx)("span",{className:"text-primary",children:"Register"})]}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===p||""===O||""===h?n("Please enter all fields!","danger"):h!==f?n("Passwords do not match","danger"):r({name:p,email:O,password:h})},children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"name",children:"Name"}),Object(a.jsx)("input",{type:"text",name:"name",value:p,onChange:y,required:!0})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email"}),Object(a.jsx)("input",{type:"email",name:"email",value:O,onChange:y,required:!0})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)("input",{type:"password",name:"password",value:h,onChange:y,required:!0,minLength:"6"})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"password2",children:"Confirm Password"}),Object(a.jsx)("input",{type:"password",name:"password2",value:f,onChange:y,required:!0,minLength:"6"})]}),Object(a.jsx)("input",{type:"submit",value:"Register",className:"btn btn-primary btn-block"})]})]})},se=function(e){var t=Object(c.useContext)(u),n=Object(c.useContext)(ne).setAlert,r=t.login,s=t.error,o=t.clearErrors,i=t.isAuthenticated;Object(c.useEffect)((function(){i&&e.history.push("/"),"Invalid credentials"===s&&(n(s,"danger"),o())}),[s,i,e.history]);var l=Object(c.useState)({email:"",password:""}),j=Object(g.a)(l,2),d=j[0],b=j[1],p=d.email,O=d.password,h=function(e){return b(Object(x.a)(Object(x.a)({},d),{},Object(m.a)({},e.target.name,e.target.value)))};return Object(a.jsxs)("div",{className:"form-container",children:[Object(a.jsxs)("h1",{children:["Account ",Object(a.jsx)("span",{className:"text-primary",children:"Login"})]}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===p||""===O?n("Please fill in all fields!","danger"):r({email:p,password:O})},children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email"}),Object(a.jsx)("input",{type:"email",name:"email",value:p,onChange:h,required:!0})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)("input",{type:"password",name:"password",value:O,onChange:h,required:!0})]}),Object(a.jsx)("input",{type:"submit",value:"Login",className:"btn btn-primary btn-block"})]})]})},oe=function(){var e=Object(c.useContext)(ne);return e.alerts.length>0&&e.alerts.map((function(e){return Object(a.jsxs)("div",{className:"alert alert-".concat(e.type),children:[Object(a.jsx)("i",{className:"fas fa-info-circle"})," ",e.msg]},e.id)}))},ie=n(195),le=function(e){var t=e.component,n=Object(ie.a)(e,["component"]),r=Object(c.useContext)(u),s=r.isAuthenticated,o=r.loading;return Object(a.jsx)(l.b,Object(x.a)(Object(x.a)({},n),{},{render:function(e){return s||o?Object(a.jsx)(t,Object(x.a)({},e)):Object(a.jsx)(l.a,{to:"/login"})}}))};localStorage.token&&$(localStorage.token);var ue=function(){return Object(a.jsx)(ee,{children:Object(a.jsx)(Y,{children:Object(a.jsx)(ce,{children:Object(a.jsx)(i.a,{children:Object(a.jsxs)(c.Fragment,{children:[Object(a.jsx)(j,{}),Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(oe,{}),Object(a.jsxs)(l.d,{children:[Object(a.jsx)(le,{exact:!0,path:"/",component:C}),Object(a.jsx)(l.b,{exact:!0,path:"/about",component:N}),Object(a.jsx)(l.b,{exact:!0,path:"/register",component:re}),Object(a.jsx)(l.b,{exact:!0,path:"/login",component:se})]})]})]})})})})})};o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(ue,{})}),document.getElementById("root"))}},[[413,1,2]]]);
//# sourceMappingURL=main.5d1bfc70.chunk.js.map